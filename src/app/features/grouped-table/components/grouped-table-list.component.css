@import "tailwindcss" reference;

/* Table styling */
table {
  border-spacing: 0;
  table-layout: fixed;
}

/* Table cell constraints */
td {
  @apply break-words max-w-[200px];
  overflow-wrap: break-word;
}

/* Grouped cell specific styling */
td.grouped-cell {
  @apply max-w-[300px];
}

/* Prevent text overflow in table cells */
.nz-table-tbody>tr>td {
  @apply align-top break-words whitespace-normal;
}

/* Header hover effects */
th button:hover {
  @apply bg-blue-500/10 rounded;
}

/* Row hover effects */
tr:hover {
  @apply !bg-slate-50;
}

/* Grouped row indentation */
.grouped-row {
  @apply pl-8;
}

/* Status tag positioning */
nz-tag {
  @apply m-0;
}

/* Table header width constraints */
th {
  @apply min-w-[120px] max-w-[200px] break-words;
}

/* Ensure proper column widths */
.nz-table-thead>tr>th,
.nz-table-tbody>tr>td {
  @apply min-w-[120px];
}

/* Specific column width adjustments for grouped content */
.nz-table-tbody>tr>td.grouped-cell {
  @apply min-w-[200px] max-w-[350px];
}

/* Text truncation utilities */
.truncate {
  @apply overflow-hidden text-ellipsis whitespace-nowrap;
}

/* Responsive table */
@media (max-width: 768px) {
  table {
    min-width: 800px;
  }

  th,
  td {
    @apply min-w-[80px] text-xs;
  }

  .grouped-cell {
    @apply min-w-[150px] max-w-[250px];
  }
}

/* Button alignment */
.flex.items-center {
  @apply items-center;
}

/* Pre-formatted text for grouping state */
pre {
  @apply font-mono max-h-[200px] overflow-y-auto;
}

/* Drag and Drop Styles */
.drag-handle {
  @apply cursor-grab transition-all duration-200 ease-in-out;
}

.drag-handle:active {
  @apply cursor-grabbing;
}

.drag-handle:hover {
  @apply bg-blue-500/10;
}

.drop-zone {
  @apply transition-all duration-300 ease-in-out min-h-[60px];
}

.drop-zone.active {
  @apply !border-blue-600 !bg-blue-50 scale-[1.02];
}

.group-tag {
  @apply transition-all duration-200 ease-in-out;
}

.group-tag:hover {
  @apply -translate-y-px shadow-md;
}

/* Ensure group tags don't wrap content */
nz-tag {
  @apply !inline-flex !items-center !whitespace-nowrap !flex-shrink-0;
}

nz-tag .ant-tag {
  @apply !inline-flex !items-center !whitespace-nowrap;
}

/* Apply drag hint styling to the actual nz-tag element */
nz-tag.drag-hint-preview .ant-tag {
  opacity: 0.6 !important;
  border: 2px dashed #3b82f6 !important;
  background-color: rgba(59, 130, 246, 0.1) !important;
  color: rgba(59, 130, 246, 0.8) !important;
}

nz-tag.drag-hint-preview {
  animation: pulse-hint 1.5s infinite;
}

.dragging {
  @apply opacity-70 rotate-3;
}

.drag-ghost {
  @apply bg-gray-100 border-2 border-dashed border-gray-400 opacity-50;
}

/* Header draggable area styling */
.draggable-header {
  @apply select-none transition-all duration-200 ease-in-out;
}

.draggable-header:hover {
  @apply bg-blue-500/5 -translate-y-px;
}

.draggable-header.dragging {
  @apply opacity-50 rotate-2 scale-105 z-[1000];
}

/* Angular CDK Drag and Drop Styles */
.cdk-drop-list {
  @apply min-h-[40px];
}

.cdk-drag {
  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
}

.cdk-drag:not(.cdk-drag-disabled) {
  @apply cursor-move;
}

.cdk-drag-preview {
  @apply shadow-xl rounded-md rotate-2;
  animation: drag-shake 0.3s ease-in-out;
}

.cdk-drag-placeholder {
  @apply opacity-60 rounded-md;
  animation: pulse-placeholder 1s infinite;
}

.cdk-drag-animating {
  transition: transform 300ms cubic-bezier(0, 0, 0.2, 1);
}

.drag-preview-template {
  @apply pointer-events-none;
}

.drag-placeholder-template {
  @apply opacity-40;
}

@keyframes drag-shake {
  0% {
    transform: rotate(0deg);
  }

  25% {
    transform: rotate(1deg);
  }

  75% {
    transform: rotate(-1deg);
  }

  100% {
    transform: rotate(2deg);
  }
}

@keyframes pulse-placeholder {

  0%,
  100% {
    opacity: 0.4;
  }

  50% {
    opacity: 0.6;
  }
}

/* Group tag states during drag operations */
.dragging-group {
  @apply !opacity-60 !rotate-2 !scale-[1.02] !shadow-xl !z-[1000];
}

.reorder-target {
  @apply !bg-blue-500/10 !border-2 !border-dashed !border-blue-600 !scale-105;
}

/* Number badge styling - ensure circular shape */
.rounded-full {
  @apply aspect-square !flex !items-center !justify-center !min-w-4 !min-h-4 !p-0 !leading-none !text-[11px] !font-medium;
  aspect-ratio: 1;
}

/* Specific styling for column header badges */
.draggable-header .rounded-full {
  @apply !w-4 !h-4 !min-w-4 !min-h-4;
}

/* Specific styling for group tag badges in drop zone */
nz-tag .rounded-full {
  @apply !w-4 !h-4 !min-w-4 !min-h-4 !text-[10px];
}
